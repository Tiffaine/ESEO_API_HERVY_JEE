<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<title>ESEO TWIC</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.min.css">

<body>
	<div id="list">		
	
			<ul class="list" id=listeVille>		
			</ul>
	</div>

	<script>
var request = new XMLHttpRequest()
request.open('GET','http://localhost:8181/testget',true);
var txt,x="";
request.onreadystatechange = function(){
var data = JSON.parse(this.response);
var listeVille =[]
	if (request.status >= 200 && request.status < 400) {
		
        data.forEach(ville => {
        	var newLength = listeVille.push(ville.nomCommune);
        })
      } else {
        console.log('error');
      }
	const $select = document.getElementById("listeVille")

	$select.innerHTML = "<li><p class=\"name\"> Villes de France : </p<</li>"; 
	listeVille.forEach(listeVille=>{
		const $opt = document.createElement("li");
		$opt.value = listeVille; 
		console.log(listeVille);
		$opt.textContent = listeVille; 
		$select.appendChild($opt);
	})
	
    }
request.send()

</script>

</body>
</html>